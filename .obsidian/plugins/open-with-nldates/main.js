/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var re=Object.create;var E=Object.defineProperty;var ie=Object.getOwnPropertyDescriptor;var se=Object.getOwnPropertyNames;var le=Object.getPrototypeOf,ce=Object.prototype.hasOwnProperty;var de=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ue=(t,e)=>{for(var n in e)E(t,n,{get:e[n],enumerable:!0})},z=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of se(e))!ce.call(t,r)&&r!==n&&E(t,r,{get:()=>e[r],enumerable:!(o=ie(e,r))||o.enumerable});return t};var ge=(t,e,n)=>(n=t!=null?re(le(t)):{},z(e||!t||!t.__esModule?E(n,"default",{value:t,enumerable:!0}):n,t)),fe=t=>z(E({},"__esModule",{value:!0}),t);var ae=de(i=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var d=require("obsidian"),U="YYYY-MM-DD",W="gggg-[W]ww",q="YYYY-MM",B="YYYY-[Q]Q",V="YYYY";function _(t){var n,o;let e=window.app.plugins.getPlugin("periodic-notes");return e&&((o=(n=e.settings)==null?void 0:n[t])==null?void 0:o.enabled)}function k(){var t,e,n,o;try{let{internalPlugins:r,plugins:a}=window.app;if(_("daily")){let{format:l,folder:m,template:p}=((e=(t=a.getPlugin("periodic-notes"))==null?void 0:t.settings)==null?void 0:e.daily)||{};return{format:l||U,folder:(m==null?void 0:m.trim())||"",template:(p==null?void 0:p.trim())||""}}let{folder:s,format:c,template:u}=((o=(n=r.getPluginById("daily-notes"))==null?void 0:n.instance)==null?void 0:o.options)||{};return{format:c||U,folder:(s==null?void 0:s.trim())||"",template:(u==null?void 0:u.trim())||""}}catch(r){console.info("No custom daily note settings found!",r)}}function L(){var t,e,n,o,r,a,s;try{let c=window.app.plugins,u=(t=c.getPlugin("calendar"))==null?void 0:t.options,l=(n=(e=c.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:n.weekly;if(_("weekly"))return{format:l.format||W,folder:((o=l.folder)==null?void 0:o.trim())||"",template:((r=l.template)==null?void 0:r.trim())||""};let m=u||{};return{format:m.weeklyNoteFormat||W,folder:((a=m.weeklyNoteFolder)==null?void 0:a.trim())||"",template:((s=m.weeklyNoteTemplate)==null?void 0:s.trim())||""}}catch(c){console.info("No custom weekly note settings found!",c)}}function Y(){var e,n,o,r;let t=window.app.plugins;try{let a=_("monthly")&&((n=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:n.monthly)||{};return{format:a.format||q,folder:((o=a.folder)==null?void 0:o.trim())||"",template:((r=a.template)==null?void 0:r.trim())||""}}catch(a){console.info("No custom monthly note settings found!",a)}}function b(){var e,n,o,r;let t=window.app.plugins;try{let a=_("quarterly")&&((n=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:n.quarterly)||{};return{format:a.format||B,folder:((o=a.folder)==null?void 0:o.trim())||"",template:((r=a.template)==null?void 0:r.trim())||""}}catch(a){console.info("No custom quarterly note settings found!",a)}}function O(){var e,n,o,r;let t=window.app.plugins;try{let a=_("yearly")&&((n=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:n.yearly)||{};return{format:a.format||V,folder:((o=a.folder)==null?void 0:o.trim())||"",template:((r=a.template)==null?void 0:r.trim())||""}}catch(a){console.info("No custom yearly note settings found!",a)}}function j(...t){let e=[];for(let o=0,r=t.length;o<r;o++)e=e.concat(t[o].split("/"));let n=[];for(let o=0,r=e.length;o<r;o++){let a=e[o];!a||a==="."||n.push(a)}return e[0]===""&&n.unshift(""),n.join("/")}function me(t){let e=t.substring(t.lastIndexOf("/")+1);return e.lastIndexOf(".")!=-1&&(e=e.substring(0,e.lastIndexOf("."))),e}async function pe(t){let e=t.replace(/\\/g,"/").split("/");if(e.pop(),e.length){let n=j(...e);window.app.vault.getAbstractFileByPath(n)||await window.app.vault.createFolder(n)}}async function M(t,e){e.endsWith(".md")||(e+=".md");let n=d.normalizePath(j(t,e));return await pe(n),n}async function D(t){let{metadataCache:e,vault:n}=window.app,o=d.normalizePath(t);if(o==="/")return Promise.resolve(["",null]);try{let r=e.getFirstLinkpathDest(o,""),a=await n.cachedRead(r),s=window.app.foldManager.load(r);return[a,s]}catch(r){return console.error(`Failed to read the daily note template '${o}'`,r),new d.Notice("Failed to read the daily note template"),["",null]}}function y(t,e="day"){let n=t.clone().startOf(e).format();return`${e}-${n}`}function K(t){return t.replace(/\[[^\]]*\]/g,"")}function we(t,e){if(e==="week"){let n=K(t);return/w{1,2}/i.test(n)&&(/M{1,4}/.test(n)||/D{1,4}/.test(n))}return!1}function T(t,e){return G(t.basename,e)}function ye(t,e){return G(me(t),e)}function G(t,e){let o={day:k,week:L,month:Y,quarter:b,year:O}[e]().format.split("/").pop(),r=window.moment(t,o,!0);if(!r.isValid())return null;if(we(o,e)&&e==="week"){let a=K(o);if(/w{1,2}/i.test(a))return window.moment(t,o.replace(/M{1,4}/g,"").replace(/D{1,4}/g,""),!1)}return r}var C=class extends Error{};async function J(t){let e=window.app,{vault:n}=e,o=window.moment,{template:r,format:a,folder:s}=k(),[c,u]=await D(r),l=t.format(a),m=await M(s,l);try{let p=await n.create(m,c.replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,o().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(h,N,F,w,f,g)=>{let v=o(),H=t.clone().set({hour:v.get("hour"),minute:v.get("minute"),second:v.get("second")});return F&&H.add(parseInt(w,10),f),g?H.format(g.substring(1).trim()):H.format(a)}).replace(/{{\s*yesterday\s*}}/gi,t.clone().subtract(1,"day").format(a)).replace(/{{\s*tomorrow\s*}}/gi,t.clone().add(1,"d").format(a)));return e.foldManager.save(p,u),p}catch(p){console.error(`Failed to create file: '${m}'`,p),new d.Notice("Unable to create new file.")}}function he(t,e){var n;return(n=e[y(t,"day")])!=null?n:null}function Ne(){let{vault:t}=window.app,{folder:e}=k(),n=t.getAbstractFileByPath(d.normalizePath(e));if(!n)throw new C("Failed to find daily notes folder");let o={};return d.Vault.recurseChildren(n,r=>{if(r instanceof d.TFile){let a=T(r,"day");if(a){let s=y(a,"day");o[s]=r}}}),o}var $=class extends Error{};function Fe(){let{moment:t}=window,e=t.localeData()._week.dow,n=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(;e;)n.push(n.shift()),e--;return n}function Pe(t){return Fe().indexOf(t.toLowerCase())}async function X(t){let{vault:e}=window.app,{template:n,format:o,folder:r}=L(),[a,s]=await D(n),c=t.format(o),u=await M(r,c);try{let l=await e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(m,p,h,N,F,w)=>{let f=window.moment(),g=t.clone().set({hour:f.get("hour"),minute:f.get("minute"),second:f.get("second")});return h&&g.add(parseInt(N,10),F),w?g.format(w.substring(1).trim()):g.format(o)}).replace(/{{\s*title\s*}}/gi,c).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi,(m,p,h)=>{let N=Pe(p);return t.weekday(N).format(h.trim())}));return window.app.foldManager.save(l,s),l}catch(l){console.error(`Failed to create file: '${u}'`,l),new d.Notice("Unable to create new file.")}}function De(t,e){var n;return(n=e[y(t,"week")])!=null?n:null}function Te(){let t={};if(!ee())return t;let{vault:e}=window.app,{folder:n}=L(),o=e.getAbstractFileByPath(d.normalizePath(n));if(!o)throw new $("Failed to find weekly notes folder");return d.Vault.recurseChildren(o,r=>{if(r instanceof d.TFile){let a=T(r,"week");if(a){let s=y(a,"week");t[s]=r}}}),t}var x=class extends Error{};async function Z(t){let{vault:e}=window.app,{template:n,format:o,folder:r}=Y(),[a,s]=await D(n),c=t.format(o),u=await M(r,c);try{let l=await e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(m,p,h,N,F,w)=>{let f=window.moment(),g=t.clone().set({hour:f.get("hour"),minute:f.get("minute"),second:f.get("second")});return h&&g.add(parseInt(N,10),F),w?g.format(w.substring(1).trim()):g.format(o)}).replace(/{{\s*date\s*}}/gi,c).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,c));return window.app.foldManager.save(l,s),l}catch(l){console.error(`Failed to create file: '${u}'`,l),new d.Notice("Unable to create new file.")}}function Ae(t,e){var n;return(n=e[y(t,"month")])!=null?n:null}function _e(){let t={};if(!te())return t;let{vault:e}=window.app,{folder:n}=Y(),o=e.getAbstractFileByPath(d.normalizePath(n));if(!o)throw new x("Failed to find monthly notes folder");return d.Vault.recurseChildren(o,r=>{if(r instanceof d.TFile){let a=T(r,"month");if(a){let s=y(a,"month");t[s]=r}}}),t}var R=class extends Error{};async function ke(t){let{vault:e}=window.app,{template:n,format:o,folder:r}=b(),[a,s]=await D(n),c=t.format(o),u=await M(r,c);try{let l=await e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(m,p,h,N,F,w)=>{let f=window.moment(),g=t.clone().set({hour:f.get("hour"),minute:f.get("minute"),second:f.get("second")});return h&&g.add(parseInt(N,10),F),w?g.format(w.substring(1).trim()):g.format(o)}).replace(/{{\s*date\s*}}/gi,c).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,c));return window.app.foldManager.save(l,s),l}catch(l){console.error(`Failed to create file: '${u}'`,l),new d.Notice("Unable to create new file.")}}function Le(t,e){var n;return(n=e[y(t,"quarter")])!=null?n:null}function Ye(){let t={};if(!ne())return t;let{vault:e}=window.app,{folder:n}=b(),o=e.getAbstractFileByPath(d.normalizePath(n));if(!o)throw new R("Failed to find quarterly notes folder");return d.Vault.recurseChildren(o,r=>{if(r instanceof d.TFile){let a=T(r,"quarter");if(a){let s=y(a,"quarter");t[s]=r}}}),t}var Q=class extends Error{};async function be(t){let{vault:e}=window.app,{template:n,format:o,folder:r}=O(),[a,s]=await D(n),c=t.format(o),u=await M(r,c);try{let l=await e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(m,p,h,N,F,w)=>{let f=window.moment(),g=t.clone().set({hour:f.get("hour"),minute:f.get("minute"),second:f.get("second")});return h&&g.add(parseInt(N,10),F),w?g.format(w.substring(1).trim()):g.format(o)}).replace(/{{\s*date\s*}}/gi,c).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,c));return window.app.foldManager.save(l,s),l}catch(l){console.error(`Failed to create file: '${u}'`,l),new d.Notice("Unable to create new file.")}}function Oe(t,e){var n;return(n=e[y(t,"year")])!=null?n:null}function Me(){let t={};if(!oe())return t;let{vault:e}=window.app,{folder:n}=O(),o=e.getAbstractFileByPath(d.normalizePath(n));if(!o)throw new Q("Failed to find yearly notes folder");return d.Vault.recurseChildren(o,r=>{if(r instanceof d.TFile){let a=T(r,"year");if(a){let s=y(a,"year");t[s]=r}}}),t}function Ee(){var o,r;let{app:t}=window,e=t.internalPlugins.plugins["daily-notes"];if(e&&e.enabled)return!0;let n=t.plugins.getPlugin("periodic-notes");return n&&((r=(o=n.settings)==null?void 0:o.daily)==null?void 0:r.enabled)}function ee(){var n,o;let{app:t}=window;if(t.plugins.getPlugin("calendar"))return!0;let e=t.plugins.getPlugin("periodic-notes");return e&&((o=(n=e.settings)==null?void 0:n.weekly)==null?void 0:o.enabled)}function te(){var n,o;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((o=(n=e.settings)==null?void 0:n.monthly)==null?void 0:o.enabled)}function ne(){var n,o;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((o=(n=e.settings)==null?void 0:n.quarterly)==null?void 0:o.enabled)}function oe(){var n,o;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((o=(n=e.settings)==null?void 0:n.yearly)==null?void 0:o.enabled)}function Se(t){let e={day:k,week:L,month:Y,quarter:b,year:O}[t];return e()}function Ie(t,e){return{day:J,month:Z,week:X}[t](e)}i.DEFAULT_DAILY_NOTE_FORMAT=U;i.DEFAULT_MONTHLY_NOTE_FORMAT=q;i.DEFAULT_QUARTERLY_NOTE_FORMAT=B;i.DEFAULT_WEEKLY_NOTE_FORMAT=W;i.DEFAULT_YEARLY_NOTE_FORMAT=V;i.appHasDailyNotesPluginLoaded=Ee;i.appHasMonthlyNotesPluginLoaded=te;i.appHasQuarterlyNotesPluginLoaded=ne;i.appHasWeeklyNotesPluginLoaded=ee;i.appHasYearlyNotesPluginLoaded=oe;i.createDailyNote=J;i.createMonthlyNote=Z;i.createPeriodicNote=Ie;i.createQuarterlyNote=ke;i.createWeeklyNote=X;i.createYearlyNote=be;i.getAllDailyNotes=Ne;i.getAllMonthlyNotes=_e;i.getAllQuarterlyNotes=Ye;i.getAllWeeklyNotes=Te;i.getAllYearlyNotes=Me;i.getDailyNote=he;i.getDailyNoteSettings=k;i.getDateFromFile=T;i.getDateFromPath=ye;i.getDateUID=y;i.getMonthlyNote=Ae;i.getMonthlyNoteSettings=Y;i.getPeriodicNoteSettings=Se;i.getQuarterlyNote=Le;i.getQuarterlyNoteSettings=b;i.getTemplateInfo=D;i.getWeeklyNote=De;i.getWeeklyNoteSettings=L;i.getYearlyNote=Oe;i.getYearlyNoteSettings=O});var ve={};ue(ve,{OpenDailyNoteModal:()=>I,default:()=>S});module.exports=fe(ve);var P=require("obsidian"),A=ge(ae()),S=class extends P.Plugin{async onload(){this.addCommand({id:"open-daily-note",name:"Open daily note",icon:"calendar-search",callback:()=>{let e=new I(this.app);e.setPlaceholder("Open daily note by date\u2026"),e.open()}})}},I=class extends P.SuggestModal{getSuggestions(e){let n=[],o=e.match(/(next|last|this)/i),r=e.match(/^in ([+-]?\d+)/i)||e.match(/^([+-]?\d+)/i);if(e.match(/^time/))n=["now","+15 minutes","+1 hour","-15 minutes","-1 hour"].map(a=>`time:${a}`).filter(a=>a.toLowerCase().startsWith(e));else if(o)n=["week","month","year","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(a=>`${o[1]} ${a}`).filter(a=>a.toLowerCase().startsWith(e));else if(r){let a=r[1];n=[`in ${a} minutes`,`in ${a} hours`,`in ${a} days`,`in ${a} weeks`,`in ${a} months`,`${a} days ago`,`${a} weeks ago`,`${a} months ago`].filter(s=>s.toLowerCase().startsWith(e))}else n=["Today","Yesterday","Tomorrow"].filter(a=>a.toLowerCase().startsWith(e));return n.length?n:[e]}renderSuggestion(e,n){n.createEl("div",{text:e})}onChooseSuggestion(e){let n=this.app.plugins.getPlugin("nldates-obsidian");if(!n){new P.Notice("Please enable Natural Language Dates plugin");return}let o=n.parseDate(e),r=o.moment;if(!o.date){new P.Notice("Unable to parse date");return}let a=(0,A.getAllDailyNotes)(),s=(0,A.getDailyNote)(r,a),c=this.app.workspace.getLeaf();s?c.openFile(s):(0,A.createDailyNote)(r).then(u=>{c.openFile(u)})}};

/* nosourcemap */